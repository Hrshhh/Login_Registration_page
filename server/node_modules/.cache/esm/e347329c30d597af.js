let express,json,fs,cors,mongoose;_30d‍.w("express",[["default",["express"],function(v){express=v}],["json",["json"],function(v){json=v}]]);_30d‍.w("fs",[["default",["fs"],function(v){fs=v}]]);_30d‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_30d‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);// const express = require('express');


require('dotenv').config();
const morgan = require('morgan');



mongoose.connect(process.env.DATABASE)
.then(() => {console.log("Connection established")})
.catch((e) => {console.log(`Error Occured ${e}`)})

const app = express();
// app.use('/api', router)
app.use(express.json());
app.use(cors());
app.use(morgan('dev'));
// Autoloading routes
fs.readdirSync('./routes').map((r) => {
    app.use('/api', require(`./routes/${r}`))
});

const port = process.env.PORT || 8000;
app.listen(port, () => console.log('Server is runnning on port 8000'));